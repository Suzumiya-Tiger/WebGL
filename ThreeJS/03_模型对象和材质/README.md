# 🌟 Three.js 三维向量 `Vector3` 讲解

## ✅ 什么是 `Vector3`？

`Vector3` 是 Three.js 中表示三维空间向量的类，包含了三个分量：**`x`, `y`, `z`**。它广泛用于表示以下内容：

- 空间中的 **位置**（如 `.position`）
- 缩放比例（如 `.scale`）
- 方向或法线（如 `.lookAt()`、`ray.direction`）
- 顶点坐标（几何体）

---

## ✅ 如何创建 `Vector3`？

```js
const v3 = new THREE.Vector3(0, 0, 0); // 创建一个 (0, 0, 0) 的向量
```

## **✅ 设置向量值的方法**

### **方法一：使用** .set(x, y, z)

```typescript
v3.set(10, 0, 0); // 设置为 (10, 0, 0)
```

### **方法二：直接修改属性** 

```typescript
v3.x = 100; // 修改 x 分量
v3.y = 50;  // 修改 y 分量
```

## **✅ 常见用途**

```typescript
// 设置物体位置
mesh.position.set(0, 50, 0);

// 获取向量长度（模）
const len = mesh.position.length();

// 向量归一化（单位向量）
mesh.position.normalize();
```

## **✅ 常用方法一览**

| **方法**           | **说明**                 |
| ------------------ | ------------------------ |
| .set(x, y, z)      | 设置三个分量             |
| .copy(v3)          | 复制另一个向量的值       |
| .add(v3)           | 向当前向量加上另一个向量 |
| .sub(v3)           | 减去另一个向量           |
| .multiplyScalar(n) | 所有分量乘以一个数       |
| .normalize()       | 归一化为单位向量         |
| .length()          | 获取向量的长度（模）     |
| .distanceTo(v3)    | 计算与另一个向量的距离   |

```typescript
const v3 = new THREE.Vector3(0, 0, 0);
v3.set(10, 0, 0);  // 设置为 (10, 0, 0)
v3.x = 100;        // 改变 x 分量为 100 → (100, 0, 0)
console.log(v3);   // 输出：Vector3 { x: 100, y: 0, z: 0 }
```

> THREE.Vector3 是 Three.js 中非常基础而强大的三维向量类，广泛用于描述位置、方向、缩放等，是构建三维场景的核心工具之一，必须熟练掌握。



## 🧭 使用 Vector3 和 `translateOnAxis()` 实现自定义方向的平移

```js
const v = new THREE.Vector3(1, 1, 1);
// 转化为单位向量
v.normalize();
console.log('单位向量', v);

// 使网格模型沿着该单位向量方向平移 100 个单位长度
mesh.translateOnAxis(v, 100);
```

1. const v = new THREE.Vector3(1, 1, 1);
   - 创建一个三维向量 v，表示方向向量，其方向是沿着 X=Y=Z 的对角线。
2. v.normalize();
   - 将 v 转换为单位向量（长度为 1），这样可以只保留方向信息，去掉大小影响。
   - 向量归一化后，便于用于表示**方向**而非**位移长度**。

### **单位向量是什么？难道不是开根号 1的平方+1的平方+1的平方吗？**

你提到的 开根号(1的平方+1的平方+1的平方) 计算的是向量 (1, 1, 1) 的长度（也叫作模）。

- 一个向量 v = (x, y, z) 的长度计算公式是 sqrt(x² + y² + z²)。

- 所以，对于向量 (1, 1, 1)，它的长度是 sqrt(1² + 1² + 1²) = sqrt(1 + 1 + 1) = sqrt(3)。

单位向量 (Unit Vector) 是指长度为 1 的向量。单位向量主要用来表示方向，而不关心其大小。

- const v = new THREE.Vector3(1, 1, 1) 创建了一个向量，其分量是 (1, 1, 1)。正如我们上面计算的，这个向量的长度是 sqrt(3)，它不是一个单位向量。

- v.normalize() 这个方法会将向量 v 转换成一个单位向量。它是通过将向量的每个分量除以向量自身的长度来实现的。

所以，原来的向量 (1, 1, 1) 经过 normalize() 操作后，会变成 (1/sqrt(3), 1/sqrt(3), 1/sqrt(3))。

这个新的向量 (1/sqrt(3), 1/sqrt(3), 1/sqrt(3)) 的长度是：

sqrt((1/sqrt(3))² + (1/sqrt(3))² + (1/sqrt(3))²) = sqrt(1/3 + 1/3 + 1/3) = sqrt(3/3) = sqrt(1) = 1。

**所以，normalize() 之后得到的 v 才是一个单位向量，它与原始向量 (1,1,1) 方向相同，但长度为1。**

总结一下：你计算的是原始向量 (1,1,1) 的长度，而不是单位向量本身。单位向量是通过将原始向量的每个分量除以其长度得到的，结果是一个长度为1的向量。

### **为什么三维向量可以代表方向？**

三维向量 (x, y, z) 在坐标系中可以被看作是从原点 (0, 0, 0) 指向点 (x, y, z) 的一个箭头。这个箭头天然就具备两个属性：

- 大小（Magnitude）：箭头的长度，也就是我们上面讨论的向量的模。

- 方向（Direction）：箭头所指向的空间方位。

当我们需要只关注方向而忽略其大小时，单位向量就非常有用。因为所有单位向量的长度都是1，所以它们之间的区别就只在于它们指向何方。

想象一下：

- 向量 (1, 0, 0) 指向X轴正方向。

- 向量 (0, 1, 0) 指向Y轴正方向。

- 向量 (0, 0, 1) 指向Z轴正方向。

- 向量 (1, 1, 0) 的单位向量 (1/sqrt(2), 1/sqrt(2), 0) 指向XY平面上，与X轴和Y轴都成45度角的方向。

**在你的代码中，mesh.translateOnAxis(v, 100)，这里的 v (经过 normalize() 后的单位向量) 就提供了平移的方向，而 100 提供了平移的距离（大小）。物体会沿着 v 所指示的方向移动 100 个单位。如果 v 不是单位向量，那么它不仅提供了方向，它自身的大小也会乘以 100 来影响最终的平移距离，这通常不是我们想要的行为，除非有特定目的。**

3. mesh.translateOnAxis(v, 100);

- 让网格对象 mesh **沿着向量 v 的方向**平移 100 个单位。
- translateOnAxis() 方法接收一个方向单位向量和一个距离，从而实现**自定义方向**的位移。



### **📌 典型应用场景**

- 沿着任意斜向、对角线或法线方向移动模型。
- 配合 camera.getWorldDirection() 可以实现相机前进（第一人称视角移动）。
- 在动画中实现对象按某个方向持续移动。

### **📝 小知识**

- normalize() 不改变原始方向，但会把向量的长度统一为 1，常用于方向运算。
- translateOnAxis() 是相对于模型自身当前的位置进行的平移操作。









































